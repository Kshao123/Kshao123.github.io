<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>React.withContext å’Œ getChildContext çš„ä½¿ç”¨</title>
    <link href="/2019/07/06/react-context/"/>
    <url>/2019/07/06/react-context/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>shusuanfa</title>
    <link href="/2019/07/03/shusuanfa/"/>
    <url>/2019/07/03/shusuanfa/</url>
    
    <content type="html"><![CDATA[<p>cnm123123123123123123123<br>wo hen 5 1497</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æ»šåŠ¨æ­Œè¯</title>
    <link href="/2019/07/02/music-gun/"/>
    <url>/2019/07/02/music-gun/</url>
    
    <content type="html"><![CDATA[<h4 id="æ»šåŠ¨æ­Œè¯"><a href="#æ»šåŠ¨æ­Œè¯" class="headerlink" title="æ»šåŠ¨æ­Œè¯"></a>æ»šåŠ¨æ­Œè¯</h4><ol><li>æŠŠè·å–åˆ°çš„æ­Œè¯ ç”¨æ¢è¡Œç¬¦ split åˆ†å‰²</li><li>ä½¿ç”¨æ­£åˆ™åˆ¤æ–­å¹¶åˆ†å‰²å‡ºæ—¶é—´å’Œæ­Œè¯</li><li>æŠŠæ­£åˆ™åŒ¹é…å‡ºçš„ åˆ†ã€ç§’ã€æ¯«ç§’ è½¬æ¢æˆç§’ åš key ä¼ å…¥ temp å¯¹è±¡ï¼Œæˆ–è€… push æ•°ç»„ä¹Ÿå¯ä»¥ï¼Œæ²¡æœ‰ key çš„æ’åºé—®é¢˜</li><li>é€šè¿‡ temp éå†å‡º html å…ƒç´ æ”¾å…¥ content</li><li>ç›‘å¬ audio çš„ [on]timeupdate äº‹ä»¶ï¼Œå…³é”®å­— e.target.currentTime ä¸ºå½“å‰æ’­æ”¾æ—¶é—´</li><li>æ ¹æ® æ—¶é—´ æ‰¾åˆ° åŒ¹é…çš„æ­Œè¯å…ƒç´ ï¼Œè®¡ç®—å…ƒç´ çš„ top ä¸ çˆ¶å…ƒç´  top çš„å·®ï¼Œå³ä¸ºä¸Šæ»šçš„è·ç¦»</li><li>æ»šåŠ¨æ—¶ç»™å½“å‰ æ­Œè¯å…ƒç´  åŠ ä¸Š active class ä½¿å…¶çªå‡º</li></ol><h6 id="è·å–åˆ°çš„æ­Œè¯å¯åœ¨-log-é‡ŒæŸ¥çœ‹"><a href="#è·å–åˆ°çš„æ­Œè¯å¯åœ¨-log-é‡ŒæŸ¥çœ‹" class="headerlink" title="è·å–åˆ°çš„æ­Œè¯å¯åœ¨ log é‡ŒæŸ¥çœ‹"></a>è·å–åˆ°çš„æ­Œè¯å¯åœ¨ log é‡ŒæŸ¥çœ‹</h6><style>    audio {        width: 300px;        height: 100px;      }          .lrc-box {        margin: 100px auto;      }          .lrc-wrap {        margin: auto;        width: 80%;        height: 400px;        background-color: rgba(153, 204, 153, 0.48);        overflow: hidden;        padding: 0 15px;        position: relative;      }          .lrc-content {        margin-top: 60px;        position: absolute;        text-align: center;        padding-top: 60px;        left: 50%;        transform: translate(-50%, 0);        transition: all 1s;      }          .lrc-content p {        text-align: center;        transition: all .1s;        /*transition-delay: .4s;*/      }          .active {        color: white;        background-color: hotpink;      }</style><div class="lrc-box"><audio id="musicBtn" style="width: 200px; height: 100px" autoplay controls="controls" src="../assets/music-gun/music.mp3"> </audio>  <div class="lrc-wrap">    <div class="lrc-content">    </div>  </div></div><script>const data = {    music: "[00:01.00]å²æœˆç¥å· - é‡‘çŸå²\n" +        "[00:06.00]\n" +        "[00:07.50]æ­Œè¯ç¼–è¾‘ï¼š\n" +        "[00:12.50]QQï¼š123123\n" +        "[00:17.50]\n" +        "[00:19.04]èƒ½å¤Ÿæ¡ç´§çš„å°±åˆ«æ”¾äº†\n" +        "[00:23.09]èƒ½å¤Ÿæ‹¥æŠ±çš„å°±åˆ«æ‹‰æ‰¯\n" +        "[00:27.22]æ—¶é—´ç€æ€¥çš„ å†²åˆ·ç€\n" +        "[00:31.65]å‰©ä¸‹äº†ä»€ä¹ˆ\n" +        "[00:35.18]åŸè°…èµ°è¿‡çš„é‚£äº›æ›²æŠ˜\n" +        "[00:39.14]åŸæ¥ç•™ä¸‹çš„éƒ½æ˜¯çœŸçš„\n" +        "[00:43.22]çºµç„¶ä¼¼æ¢¦å•Š åŠé†’ç€\n" +        "[00:47.35]ç¬‘ç€å“­ç€éƒ½å¿«æ´»\n" +        "[00:51.69]è°è®©\n" +        "[00:54.73]æ—¶é—´æ˜¯è®©äººçŒä¸åŠé˜²çš„ä¸œè¥¿\n" +        "[00:58.95]æ™´æ—¶æœ‰é£é˜´æœ‰æ—¶é›¨\n" +        "[01:02.95]äº‰ä¸è¿‡æœå¤• åˆå¿µç€å¾€æ˜”\n" +        "[01:06.93]å·èµ°äº†é’ä¸å´ç•™ä½ä¸€ä¸ªä½ \n" +        "[01:11.00]å²æœˆæ˜¯ä¸€åœºæœ‰å»æ— å›çš„æ—…è¡Œ\n" +        "[01:15.01]å¥½çš„åçš„éƒ½æ˜¯é£æ™¯\n" +        "[01:18.98]åˆ«æ€ªæˆ‘è´ªå¿ƒ åªæ˜¯ä¸æ„¿é†’\n" +        "[01:22.98]å› ä¸ºä½ åªä¸ºä½ æ„¿å’Œæˆ‘ä¸€èµ·\n" +        "[01:27.00]çœ‹äº‘æ·¡é£è½»\n" +        "[01:31.14]\n" +        "[01:42.91]æ—¶é—´æ˜¯è®©äººçŒä¸åŠé˜²çš„ä¸œè¥¿\n" +        "[01:46.92]æ™´æ—¶æœ‰é£é˜´æœ‰æ—¶é›¨\n" +        "[01:50.91]äº‰ä¸è¿‡æœå¤• åˆå¿µç€å¾€æ˜”\n" +        "[01:54.92]å·èµ°äº†é’ä¸å´ç•™ä½ä¸€ä¸ªä½ \n" +        "[01:58.89]å²æœˆæ˜¯ä¸€åœºæœ‰å»æ— å›çš„æ—…è¡Œ\n" +        "[02:02.88]å¥½çš„åçš„éƒ½æ˜¯é£æ™¯\n" +        "[02:06.96]åˆ«æ€ªæˆ‘è´ªå¿ƒ åªæ˜¯ä¸æ„¿é†’\n" +        "[02:10.86]å› ä¸ºä½ åªä¸ºä½ æ„¿å’Œæˆ‘ä¸€èµ·\n" +        "[02:16.32]çœ‹äº‘æ·¡é£è½»\n" +        "[02:20.07]"};console.log(data.music);const temp = {};const LRC = data.music;const matchLrc = LRC.split(/\n/);const reg = /\[(\d{2}):(\d{2})\.(\d{2})](.*)/;for (let i = 0; i < matchLrc.length; i += 1) {   const item = matchLrc[i];   // exec æ²¡æœ‰åŒ¹é…è¿”å› null   const res = reg.exec(item);   if (! reg) continue;   const [_, m, s, ms, text] = res;   // å°†ä»–ä»¬è½¬æˆç§’ æ¯«ç§’ä¹Ÿå¯ä»¥åšç§’çš„å››èˆäº”å…¥æ“ä½œ   // const key = (m * 60) + Math.round(s);   // - 0 05 - 0 = 5   // console.log((m * 60) + ((s + '.' + ms) - 0));   const key = (m * 60) + (s - 0);   temp[key] = text;}let html = '';for (let time in temp) {   html += `<p time=${time}>${temp[time]}</p>`}const lrcContent = document.querySelector('.lrc-content');lrcContent.innerHTML = html;const musicBtn = document.getElementById('musicBtn');let index = -1;musicBtn.ontimeupdate = e => {   // è·å–ç§’æ•° ä¸ dom å…ƒç´ å¯¹åº”   // console.log(e.target.currentTime, 'time');   const key = Math.floor(e.target.currentTime);   if (! temp[key]) return;   const p = lrcContent.querySelector(`p[time='${key}']`);   // æ­¤æ—¶çš„ p topå€¼ï¼Œå¤§äº contentï¼Œç”¨ p - content çš„ top å€¼ï¼Œå³ä¸ºéœ€è¦ç§»åŠ¨çš„è·ç¦»   const far = p.offsetTop - lrcContent.offsetTop;   lrcContent.style.transform = `translate(-50%, -${far}px)`;   p.classList.add('active');   if (index > -1 && index !== key) lrcContent.querySelector(`p[time='${index}']`).classList.remove('active');   index = key;}</script><pre><code class="javascript">data.music = &#39;æ­Œè¯&#39;; // æ­Œè¯åœ¨ log è‡ªè¡Œå¤åˆ¶const temp = {};const LRC = data.music;const matchLrc = LRC.split(/\n/);const reg = /\[(\d{2}):(\d{2})\.(\d{2})](.*)/;for (let i = 0; i &lt; matchLrc.length; i += 1) {   const item = matchLrc[i];   // exec æ²¡æœ‰åŒ¹é…è¿”å› null   const res = reg.exec(item);   if (! reg) continue;   const [_, m, s, ms, text] = res;   // å°†ä»–ä»¬è½¬æˆç§’ æ¯«ç§’ä¹Ÿå¯ä»¥åšç§’çš„å››èˆäº”å…¥æ“ä½œ   // const key = (m * 60) + Math.round(s);   // - 0 05 - 0 = 5   // console.log((m * 60) + ((s + &#39;.&#39; + ms) - 0));   const key = (m * 60) + (s - 0);   temp[key] = text;}let html = &#39;&#39;;for (let time in temp) {   html += `&lt;p time=${time}&gt;${temp[time]}&lt;/p&gt;`}const lrcContent = document.querySelector(&#39;.lrc-content&#39;);lrcContent.innerHTML = html;const musicBtn = document.getElementById(&#39;musicBtn&#39;);let index = -1;musicBtn.ontimeupdate = e =&gt; {   // è·å–ç§’æ•° ä¸ dom å…ƒç´ å¯¹åº”   // console.log(e.target.currentTime, &#39;time&#39;);   const key = Math.floor(e.target.currentTime);   if (! temp[key]) return;   const p = lrcContent.querySelector(`p[time=&#39;${key}&#39;]`);   // æ­¤æ—¶çš„ p topå€¼ï¼Œå¤§äº contentï¼Œç”¨ p - content çš„ top å€¼ï¼Œå³ä¸ºéœ€è¦ç§»åŠ¨çš„è·ç¦»   const far = p.offsetTop - lrcContent.offsetTop;   lrcContent.style.transform = `translate(-50%, -${far}px)`;   p.classList.add(&#39;active&#39;);   if (index &gt; -1 &amp;&amp; index !== key) lrcContent.querySelector(`p[time=&#39;${index}&#39;]`).classList.remove(&#39;active&#39;);   index = key;}</code></pre>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>demo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>css åº•éƒ¨èœå•æ åŠ¨ç”»</title>
    <link href="/2019/07/01/css-tab/"/>
    <url>/2019/07/01/css-tab/</url>
    
    <content type="html"><![CDATA[<p>ä»ä¸­é—´å±•å¼€ after éœ€è¦<br>è®¾ç½® position:absoluteï¼›leftï¼š0ï¼›rightï¼š0ï¼›bottomï¼š0ï¼›marginï¼šauto</p><iframe width="100%" height="500" src="//jsfiddle.net/142536yu/fq3pgnx0/embedded/js,html,css,result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>]]></content>
    
    
    <categories>
      
      <category>cssTricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>css</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>css èƒŒæ™¯æ¸å˜ å®ç°ä¼˜æƒ åˆ¸</title>
    <link href="/2019/07/01/coucpons-bg/"/>
    <url>/2019/07/01/coucpons-bg/</url>
    
    <content type="html"><![CDATA[<h5 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h5><h6 id="çº¿æ€§æ¸å˜-å¾„å‘æ¸å˜"><a href="#çº¿æ€§æ¸å˜-å¾„å‘æ¸å˜" class="headerlink" title="çº¿æ€§æ¸å˜ å¾„å‘æ¸å˜"></a>çº¿æ€§æ¸å˜ å¾„å‘æ¸å˜</h6><ol><li>ä½¿ç”¨å¾„å‘æ¸å˜å®ç°ç¼ºå£æ•ˆæœ</li></ol><iframe width="100%" height="300" src="//jsfiddle.net/142536yu/5qpf47en/4/embedded/js,html,css,result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>]]></content>
    
    
    <categories>
      
      <category>cssTricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>background</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac + docker å®¹å™¨æ­å»ºæœ¬åœ° gitlab ci runner + ssh | ftp è‡ªåŠ¨éƒ¨ç½²</title>
    <link href="/2019/07/01/gitlab-ci/"/>
    <url>/2019/07/01/gitlab-ci/</url>
    
    <content type="html"><![CDATA[<h4 id="å®‰è£…-docker"><a href="#å®‰è£…-docker" class="headerlink" title="å®‰è£… docker"></a>å®‰è£… docker</h4><blockquote><p><a href="https://www.docker.com/products/docker-toolbox" target="_blank" rel="noopener">https://www.docker.com/products/docker-toolbox</a></p></blockquote><h4 id="åŠ é€Ÿå™¨"><a href="#åŠ é€Ÿå™¨" class="headerlink" title="åŠ é€Ÿå™¨"></a>åŠ é€Ÿå™¨</h4><blockquote><p><a href="https://dashboard.daocloud.io/mirror" target="_blank" rel="noopener">https://dashboard.daocloud.io/mirror</a></p></blockquote><ol><li>ç‚¹å‡»ç«‹å³å¼€å§‹ï¼æ¥å…¥è‡ªæœ‰ä¸»æœºï¼æˆ‘å·²æœ‰ä¸€å°ä¸»æœºï¼é€‰æ‹©MACï¼ç›´æ¥ç‚¹å‡»</li><li>æ ¹æ®æ­¥éª¤ ç›´è‡³æ§åˆ¶å°æ˜¾ç¤ºæœ‰ä½ çš„ä¸»æœº</li><li>å»é•œåƒä»“åº“æœç´¢ <code>gitlab-ce</code></li></ol><pre><code>éƒ¨ç½²é•œåƒå¯åœ¨å‘½ä»¤è¡Œéƒ¨ç½²ï¼Œæˆ–è€…åˆšåˆšä¸‹è½½çš„ Gui å·¥å…·å†…</code></pre><ol start="4"><li>éƒ¨ç½²å¥½é•œåƒï¼Œæ‰“å¼€æ˜ å°„çš„ä¸»æœºç«¯å£ï¼Œä¼šæ˜¾ç¤ºé‡ç½®å¯†ç (å¯†ç åº”ä¸º å…«ä½+è‹±æ–‡å­—ç¬¦é™åˆ¶)é»˜è®¤ç”¨æˆ·å <code>root</code></li><li>å®‰è£… runner é•œåƒï¼Œå¯åœ¨ <a href="https://dashboard.daocloud.io/" target="_blank" rel="noopener">Daocloud</a> ä¸­éƒ¨ç½²åˆ°ä¸»æœº</li><li>æ³¨å†Œrunner</li></ol><pre><code class="yml">åœ¨åˆšåˆšå®‰è£…çš„ gitlab ä¸­åˆ›å»ºé¡¹ç›®ï¼Œåœ¨é¡¹ç›®å†…çš„settingé€‰é¡¹é€‰ä¸­ Ci/CDåœ¨ Runners é€‰é¡¹ä¸­ä¼šçœ‹åˆ°å¯¹åº”çš„ é“¾æ¥ å’Œ token</code></pre><p><img src="https://i.loli.net/2019/07/01/5d197ecc3e59810455.png" alt="image"></p><ol start="7"><li>æ³¨å†Œ runner</li></ol><pre><code class="yml">å¯åŠ¨ runner å®¹å™¨ï¼Œå¹¶è¿›å…¥å®¹å™¨docker exec -it runner bashé€€å‡ºå‘½ä»¤ exitè¿›å…¥å®¹å™¨è¾“å…¥gitlab-runner register -n \   --url http://172.17.0.3/ \   --registration-token PCfVAC_B_zJWDzz_xxkt \   --executor docker \   --description &quot;runner1&quot; \   --docker-image &quot;node:latest&quot; \   --clone-url http://172.17.0.3/ urlï¼šgitlab çš„åŸŸåï¼Œdockerå†…ä¸ºå®¹å™¨çš„ IPregistration-tokenï¼š åˆšåˆšå¤åˆ¶çš„ tokenexecutorï¼š è¿è¡Œç¯å¢ƒdescriptionï¼šclone-urlï¼š å¾ˆé‡è¦ï¼Œä¸æ·»åŠ å¯èƒ½ä¼šæŠ¥é”™å¦‚ä¸‹fatal: unable to access &#39;http://gitlab-ci-token:[MASKED]@f96d3c31771aé»˜è®¤æ³¨å†Œè¾“å…¥ gitlab-runner register  æ˜¯æŒ‰æµç¨‹æ¥çš„æœ‰ tagæ ‡ç­¾æŒ‰ä¸Šé¢æ­¥éª¤éœ€è¦åœ¨ setting/[CI/CD]/runners è®¾ç½® tag</code></pre><h6 id="è®¾ç½®å®Œæˆï¼Œå¯åœ¨-setting-CI-CD-runners-çœ‹åˆ°-runner"><a href="#è®¾ç½®å®Œæˆï¼Œå¯åœ¨-setting-CI-CD-runners-çœ‹åˆ°-runner" class="headerlink" title="è®¾ç½®å®Œæˆï¼Œå¯åœ¨  setting/[CI/CD]/runners çœ‹åˆ° runner"></a>è®¾ç½®å®Œæˆï¼Œå¯åœ¨  setting/[CI/CD]/runners çœ‹åˆ° runner</h6><p><img src="https://img-blog.csdn.net/20170515161632358?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYWl4aWFveWFuZzE2OA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p><ol start="8"><li>é…ç½® ssh mac/Linux ç¯å¢ƒ</li></ol><pre><code class="Python"># ä¸å»ºè®®ä½¿ç”¨ root è´¦æˆ·åˆ›å»ºï¼Œå¯èƒ½ä¼šæœ‰å„ç§é—®é¢˜# åˆ›å»ºè´¦æˆ· kshao1useradd kshao1# ä¿®æ”¹å¯†ç passwd kshao1# ç›´æ¥ç”Ÿæˆ å…¬ç§é’¥ å…¨ç¨‹å›è½¦ å…å¯†ç™»é™†ssh-keygen -t rsa || ssh-keygen# ä¸€èˆ¬ç”¨æˆ·ä¼šåœ¨ home/ç”¨æˆ·å/.ssh çœ‹åˆ°æ–‡ä»¶å¯†é’¥æ–‡ä»¶# å¦‚æœæ²¡æœ‰ä»¥ä¸‹æ–‡ä»¶åˆ™ç”Ÿæˆtouch authorized_keys# è¯¥æ–‡ä»¶æƒé™å¿…é¡»æ˜¯ 600 è·¯å¾„éšæ„chmod 600 /root/.ssh/authorized_keys# æ˜¯&gt;&gt;è€Œä¸æ˜¯&gt;ï¼ŒåŒå°–æ‹¬å·&gt;&gt;è¡¨ç¤ºåƒå‘æ–‡ä»¶ä¸­è¿½åŠ ï¼šcat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</code></pre><blockquote><p>ç»†èŠ‚ <a href="https://blog.csdn.net/nahancy/article/details/79059135" target="_blank" rel="noopener">https://blog.csdn.net/nahancy/article/details/79059135</a></p></blockquote><h6 id="ä½¿ç”¨-shell-ssh-å¯†ç é“¾æ¥"><a href="#ä½¿ç”¨-shell-ssh-å¯†ç é“¾æ¥" class="headerlink" title="ä½¿ç”¨ shell ssh å¯†ç é“¾æ¥"></a>ä½¿ç”¨ shell ssh å¯†ç é“¾æ¥</h6><pre><code>#!/usr/bin/expect -fset TARGET 119.3.79.171set USER xxxset PASSWD xxxset PORT xxxset timeout 10spawn ssh $USER@$TARGET -p $PORTexpect {    &quot;*yes/no&quot; {send &quot;yes\r&quot;; exp_continue}    &quot;*password:&quot; {send &quot;$PASSWD\r&quot;}}interact</code></pre><ol start="9"><li>é…å€¼ .gitlab-ci.yml æ–‡ä»¶<h6 id="Lftp-è¿æ¥è™šæ‹Ÿä¸»æœº"><a href="#Lftp-è¿æ¥è™šæ‹Ÿä¸»æœº" class="headerlink" title="Lftp è¿æ¥è™šæ‹Ÿä¸»æœº"></a>Lftp è¿æ¥è™šæ‹Ÿä¸»æœº</h6><pre><code class="yml">image: mwienk/docker-lftp:latest</code></pre></li></ol><p>stages:</p><ul><li>deploy</li></ul><p>deploy:<br>  stage: deploy</p><p>  script:</p><pre><code># æŒ‡å®šç›®å½•è¦†ç›–ä¸Šä¼  (å¼ºåˆ¶æ›´æ–°)  - ls -la  - lftp -c &quot;set ftp:ssl-allow no; open -u $FTP_USERNAME,$FTP_PASSWORD $FTP_HOST -p $port;mirror -RLv ./public /gmlh97ux/wwwroot --ignore-time --transfer-all --parallel=50 --exclude-glob .git* --exclude .git/&quot;</code></pre><p>  tags:</p><pre><code># runner å®¹å™¨æ ‡ç­¾- docker</code></pre><p>  only:</p><pre><code># ä»… master åˆ†æ”¯- master</code></pre><pre><code>###### ssh è¿æ¥æœåŠ¡å™¨ éœ€è¦å‡†å¤‡å¥½ å¯†é’¥æ–‡ä»¶ scp åŒç†###### shellæ–‡ä»¶ å¯åœ¨ yml ä¸­æ‰“å¼€ script ./xxx```bash#!/bin/sh# -tt å–æ¶ˆæç¤º# ./id_rsa1 æ–‡ä»¶åœ°å€  ssh -tt -i ./id_rsa1 kshao1@119.3.79.170 -p 22  &lt;&lt; remotessh  echo down  cd /home/kshao1/.ssh  ls  exitremotessh</code></pre>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>gitlab</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ Hexo + Next + Algolia æœç´¢ æ­å»ºåšå®¢</title>
    <link href="/2019/07/01/blog/"/>
    <url>/2019/07/01/blog/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h2><h5 id="å…¨å±€å®‰è£…"><a href="#å…¨å±€å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…"></a>å…¨å±€å®‰è£…</h5><pre><code>$ npm install hexo-cli -g #282a2e</code></pre><h5 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h5><pre><code class="Python">$ hexo init [folder]# folder  é¡¹ç›®åç§°</code></pre><h5 id="å¯åŠ¨é¢„è§ˆ"><a href="#å¯åŠ¨é¢„è§ˆ" class="headerlink" title="å¯åŠ¨é¢„è§ˆ"></a>å¯åŠ¨é¢„è§ˆ</h5><pre><code class="Python">$ hexo server é¢„è§ˆ# å¦‚ä½ æ˜¯ webstrom å¯åœ¨ package å†…çš„ scripts ä¸­æ·»åŠ &quot;start&quot;: &quot;hexo server&quot;# æ–¹ä¾¿ä»¥åå¯åŠ¨é¢„è§ˆ</code></pre><h5 id="æ–°å»ºé¡µé¢"><a href="#æ–°å»ºé¡µé¢" class="headerlink" title="æ–°å»ºé¡µé¢"></a>æ–°å»ºé¡µé¢</h5><pre><code class="Python">$ hexo new [layout] &lt;title&gt;</code></pre><h4 id="å®‰è£…-Next-ä¸»é¢˜"><a href="#å®‰è£…-Next-ä¸»é¢˜" class="headerlink" title="å®‰è£… Next ä¸»é¢˜"></a>å®‰è£… Next ä¸»é¢˜</h4><blockquote><p>å®˜ç½‘ <a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">http://theme-next.iissnan.com/</a></p></blockquote><pre><code class="Python"># å®˜ç½‘æä¾›çš„æ˜¯ æ—§ç‰ˆ é“¾æ¥ï¼Œæ³¨æ„æœ¬æ–‡çš„å‘å¸ƒæ—¥æœŸå†å»å®˜ç½‘å¯¹ç…§$ cd hexo$ git clone https://github.com/theme-next/hexo-theme-next themes/next</code></pre><h6 id="å®‰è£…å®Œæˆä¹‹åå»ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ ¹ç›®å½•-config-é€‰ç”¨-Next"><a href="#å®‰è£…å®Œæˆä¹‹åå»ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ ¹ç›®å½•-config-é€‰ç”¨-Next" class="headerlink" title="å®‰è£…å®Œæˆä¹‹åå»ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ ¹ç›®å½•/_config é€‰ç”¨ Next"></a>å®‰è£…å®Œæˆä¹‹åå»ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ ¹ç›®å½•/_config é€‰ç”¨ Next</h6><pre><code>theme: next</code></pre><h5 id="é…ç½®èœå•çš„-åˆ†ç±»ã€æ ‡ç­¾"><a href="#é…ç½®èœå•çš„-åˆ†ç±»ã€æ ‡ç­¾" class="headerlink" title="é…ç½®èœå•çš„ åˆ†ç±»ã€æ ‡ç­¾"></a>é…ç½®èœå•çš„ åˆ†ç±»ã€æ ‡ç­¾</h5><pre><code class="Python">$ cd your-hexo-site$ hexo new page tags</code></pre><h6 id="ä¿®æ”¹èœå•-Next-ä¸»é¢˜é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹èœå•-Next-ä¸»é¢˜é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹èœå•(Next ä¸»é¢˜é…ç½®æ–‡ä»¶)"></a>ä¿®æ”¹èœå•(Next ä¸»é¢˜é…ç½®æ–‡ä»¶)</h6><pre><code>menu:  home: /  archives: /archives  tags: /tags</code></pre><h6 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h6><pre><code># ---# åˆ†ç±»categories:  - å…¶ä»–æ•™ç¨‹# æ ‡ç­¾tags:  - blog# ---</code></pre><h4 id="å®‰è£…-Algolia-æœç´¢"><a href="#å®‰è£…-Algolia-æœç´¢" class="headerlink" title="å®‰è£… Algolia æœç´¢"></a>å®‰è£… Algolia æœç´¢</h4><h6 id="æ­¤æ“ä½œæµç¨‹åªåœ¨-Next-ä¸»é¢˜ä¸‹æµ‹è¯•"><a href="#æ­¤æ“ä½œæµç¨‹åªåœ¨-Next-ä¸»é¢˜ä¸‹æµ‹è¯•" class="headerlink" title="æ­¤æ“ä½œæµç¨‹åªåœ¨ Next ä¸»é¢˜ä¸‹æµ‹è¯•"></a>æ­¤æ“ä½œæµç¨‹åªåœ¨ Next ä¸»é¢˜ä¸‹æµ‹è¯•</h6><h1 align="center">Algolia æœç´¢</h1><p>NexT å†…éƒ¨æä¾› Algolia çš„æœç´¢åŠŸèƒ½ï¼Œè¦ä½¿ç”¨æ­¤åŠŸèƒ½è¯·ç¡®ä¿æ‰€ä½¿ç”¨çš„ NexT ç‰ˆæœ¬åœ¨ <code>v5.1.0</code> ä¹‹åã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»…ä»…å°† <code>next/_config.yml</code> ä¸­ <code>algolia_search</code> çš„ <code>enable</code> æ‰“å¼€<strong>å¹¶ä¸èƒ½è®©ä½ ä½¿ç”¨ Algolia æœç´¢</strong>ï¼Œä½ è¿˜éœ€è¦<strong>ä½¿ç”¨å¯¹åº”çš„ Hexo-Algolia æ’ä»¶</strong> æ‰èƒ½çœŸæ­£åœ¨åšå®¢é¡µé¢ä¸­ä½¿ç”¨ Algolia æœç´¢ã€‚æŒ‰ç…§ä¸‹é¢ä»‹ç»çš„æ­¥éª¤æ“ä½œå³å¯å®Œæˆ Algolia æœç´¢çš„å®‰è£…ã€‚</p><ol><li><p>å‰å¾€ <a href="https://www.algolia.com/" target="_blank" rel="noopener">Algolia æ³¨å†Œé¡µé¢</a>ï¼Œæ³¨å†Œä¸€ä¸ªæ–°è´¦æˆ·ã€‚ å¯ä»¥ä½¿ç”¨ GitHub æˆ–è€… Google è´¦æˆ·ç›´æ¥ç™»å½•ï¼Œæ³¨å†Œåçš„ 14 å¤©å†…æ‹¥æœ‰æ‰€æœ‰åŠŸèƒ½ï¼ˆåŒ…æ‹¬æ”¶è´¹ç±»åˆ«çš„ï¼‰ã€‚ä¹‹åè‹¥æœªç»­è´¹ä¼šè‡ªåŠ¨é™çº§ä¸ºå…è´¹è´¦æˆ·ï¼Œå…è´¹è´¦æˆ· æ€»å…±æœ‰ 10,000 æ¡è®°å½•ï¼Œæ¯æœˆæœ‰ 100,000 çš„å¯ä»¥æ“ä½œæ•°ã€‚æ³¨å†Œå®Œæˆåï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Indexï¼Œè¿™ä¸ª Index å°†åœ¨åé¢ä½¿ç”¨ã€‚</p><p> <img src="http://theme-next.iissnan.com/uploads/algolia/algolia-step-2.png" alt=""></p></li><li><p>Index åˆ›å»ºå®Œæˆåï¼Œæ­¤æ—¶è¿™ä¸ª Index é‡ŒæœªåŒ…å«ä»»ä½•æ•°æ®ã€‚æ¥ä¸‹æ¥éœ€è¦å®‰è£… <a href="https://github.com/oncletom/hexo-algolia" target="_blank" rel="noopener">Hexo Algolia</a> æ‰©å±•ï¼Œè¿™ä¸ªæ‰©å±•çš„åŠŸèƒ½æ˜¯æœé›†ç«™ç‚¹çš„å†…å®¹å¹¶é€šè¿‡ API å‘é€ç»™ Algoliaã€‚å‰å¾€ç«™ç‚¹æ ¹ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤å®‰è£…ï¼š</p><pre><code> $ cd hexo $ npm install --save hexo-algolia</code></pre></li><li><p>åœ¨ <code>API Keys</code> é¡µé¢æ‰¾åˆ°éœ€è¦ä½¿ç”¨çš„ä¸€äº›é…ç½®çš„å€¼ï¼ŒåŒ…æ‹¬ <code>ApplicationID</code> å’Œ <code>Search-Only API Key</code>ã€‚æ³¨æ„ï¼Œ<code>Admin API Key</code> éœ€è¦ä¿å¯†ä¿å­˜ï¼Œä¸è¦å¤–æ³„ã€‚</p><p> <img src="https://user-images.githubusercontent.com/8521181/35479066-64e35aec-0428-11e8-91f9-1ec3afa45c5c.png" alt=""></p></li><li><p>åœ¨ <code>API Keys</code> é¡µé¢ï¼Œç‚¹å‡» <code>ALL API KEYS</code> æ‰¾åˆ°æ–°å»º INDEX å¯¹åº”çš„ keyï¼Œ<strong>ç¼–è¾‘æƒé™</strong>ï¼Œåœ¨å¼¹å‡ºæ¡†ä¸­æ‰¾åˆ° ACL ï¼Œ<strong>å‹¾é€‰ Add recordsã€ Delete recordsã€List indicesã€Delete index æƒé™</strong>ï¼Œç‚¹å‡» <code>update</code> æ›´æ–°ã€‚</p><p> <img src="https://user-images.githubusercontent.com/8521181/35479064-611aa0b4-0428-11e8-85a1-cfb449b486ec.png" alt=""><br> <img src="https://user-images.githubusercontent.com/8521181/35479084-d4f7ac02-0428-11e8-95a6-c4e3b1bef47b.png" alt=""></p></li><li><p>ç¼–è¾‘ <code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>ï¼Œæ–°å¢ä»¥ä¸‹é…ç½®ï¼Œé™¤äº† <code>chunkSize</code> å­—æ®µï¼Œæ›¿æ¢æˆåœ¨ Algolia è·å–åˆ°çš„å€¼ï¼š</p><pre><code class="yml"> algolia:   applicationID: &#39;applicationID&#39;   apiKey: &#39;apiKey&#39;   indexName: &#39;indexName&#39;   chunkSize: 5000</code></pre></li><li><p>å½“é…ç½®å®Œæˆï¼Œåœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸€ä¸‹å‘½ä»¤æ¥æ›´æ–°ä¸Šä¼  Indexã€‚è¯·æ³¨æ„è§‚å¯Ÿå‘½ä»¤çš„è¾“å‡ºã€‚</p><pre><code> $ export HEXO_ALGOLIA_INDEXING_KEY=Search-Only API key # ä½¿ç”¨ Git Bash # set HEXO_ALGOLIA_INDEXING_KEY=Search-Only API key # ä½¿ç”¨ Windows CMD å‘½ä»¤è¡Œ $ hexo clean $ hexo algolia</code></pre><p> <img src="http://theme-next.iissnan.com/uploads/algolia/algolia-step-4.png" alt=""></p></li><li><p>åˆ‡æ¢åˆ° NexT ç›®å½•ï¼Œå¹¶å®‰è£… algolia-instant-search åˆ° <code>source/lib</code> ç›®å½•ã€‚</p><pre><code> $ cd themes/next $ git clone https://github.com/theme-next/theme-next-algolia-instant-search source/lib/algolia-instant-search</code></pre><p> å¦‚æœä½ æƒ³ç›´æ¥ä½¿ç”¨ CDN è®¾ç½® Algolia Searchï¼Œåˆ™éœ€è¦åœ¨<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­æ·»åŠ  vendors å­—æ®µï¼š</p><pre><code class="yml"> vendors:   ...   # Internal version: 1   # https://www.algolia.com   algolia_instant_js: https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.js   algolia_instant_css: https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.min.css   ...</code></pre></li><li><p>æ›´æ”¹<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼Œæ‰¾åˆ° Algolia Search é…ç½®éƒ¨åˆ†ï¼Œå°† <code>enable</code> æ”¹ä¸º <code>true</code>ã€‚åŒæ—¶ä½ éœ€è¦<strong>å…³é—­</strong>å…¶ä»–æœç´¢æ’ä»¶ï¼Œå¦‚ Local Search ç­‰ã€‚ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ <code>labels</code> ä¸­çš„æ–‡æœ¬ï¼š</p><pre><code class="yml"> # Algolia Search algolia_search:   enable: true   hits:     per_page: 10   labels:     input_placeholder: Search for Posts     hits_empty: &quot;We didn&#39;t find any results for the search: ${query}&quot;     hits_stats: &quot;${hits} results found in ${time} ms&quot;</code></pre></li></ol><h2 align="center">å·²çŸ¥çš„é—®é¢˜</h2><ol><li>è€ƒè™‘åˆ° Algolia å…è´¹è´¦æˆ·çš„é™åˆ¶ï¼Œç›®å‰ <a href="https://github.com/oncletom/hexo-algolia" target="_blank" rel="noopener">Hexo-Algolia</a> æ’ä»¶æœ€æ–°ç‰ˆæœ¬å»æ‰äº†æ­£æ–‡ç´¢å¼•åŠŸèƒ½ã€‚</li><li><a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch" target="_blank" rel="noopener">Hexo-Algoliasearch</a> æ’ä»¶æä¾›äº†æ­£æ–‡ç´¢å¼•åŠŸèƒ½ï¼Œä¸è¿‡éœ€è¦æ›¿æ¢ NEXT ä¸»é¢˜ä¸­çš„å…³é”®å­—ã€‚å¯¹äºå…è´¹è´¦æˆ·ï¼Œ<code>Record Too Big</code> çš„é—®é¢˜åŒæ ·å­˜åœ¨ã€‚<ul><li>æ›¿æ¢ <code>source/js/algolia-search.js</code> ä¸­æ‰€æœ‰çš„ <code>applicationID</code> ä¸º <code>appId</code></li><li>æ›¿æ¢ <code>layout/_partials/head/head.swig</code> ä¸­æ‰€æœ‰çš„ <code>applicationID</code> ä¸º <code>appId</code></li></ul></li></ol><blockquote><p>æ­¤æ–‡æ¡£åœ¨ /themes/nest/docs/ALGOLIA-SEARCH</p></blockquote><h4 id="çœ‹å®Œä»¥ä¸Šæ–‡æ¡£ï¼Œé»˜è®¤ä½ ä»¥å®‰è£…å®Œ-Algoliaï¼Œæ¥ä¸‹æ¥ä½¿ç”¨-Hexo-Algoliasearch"><a href="#çœ‹å®Œä»¥ä¸Šæ–‡æ¡£ï¼Œé»˜è®¤ä½ ä»¥å®‰è£…å®Œ-Algoliaï¼Œæ¥ä¸‹æ¥ä½¿ç”¨-Hexo-Algoliasearch" class="headerlink" title="çœ‹å®Œä»¥ä¸Šæ–‡æ¡£ï¼Œé»˜è®¤ä½ ä»¥å®‰è£…å®Œ Algoliaï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ Hexo-Algoliasearch"></a>çœ‹å®Œä»¥ä¸Šæ–‡æ¡£ï¼Œé»˜è®¤ä½ ä»¥å®‰è£…å®Œ Algoliaï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ Hexo-Algoliasearch</h4><ul><li>é¦–å…ˆå®‰è£… <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch" target="_blank" rel="noopener">Hexo-Algoliasearch</a></li></ul><h5 id="åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶"><a href="#åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶" class="headerlink" title="åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶"></a>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶</h5><pre><code class="yml">algolia:  # appid ä¸º applicationID å¦‚æœªæ›¿æ¢éœ€æ›¿æ¢  appId: &quot;Z7A3XW4R2I&quot;  # search only key  apiKey: &quot;12db1ad54372045549ef465881c17e743&quot;  adminApiKey: &quot;40321c7c207e7f73b63a19aa24c4761b&quot;  chunkSize: 5000  indexName: &quot;my-hexo-blog&quot;  fields:    - content:strip:truncate,0,500    - excerpt:strip    - gallery    - permalink    - photos    - slug    - tags    - title</code></pre><p>é…ç½®å®Œæˆåè¿è¡Œ</p><pre><code class="yml">$ hexo clean$ hexo algolia</code></pre><hr><p>é…ç½®å¥½ä»¥ä¸Šï¼ŒNextçš„<code>algolia</code>æœç´¢æ˜¯æ²¡æœ‰å†…å®¹æœç´¢çš„ï¼Œæ‰€ä»¥é…ç½®äº†ä¸Šé¢çš„æ’ä»¶ã€‚<br>é»˜è®¤ <code>algolia</code> æœç´¢æ˜¾ç¤ºåªæœ‰æ ‡é¢˜ï¼Œå…³é”®è¯æœªé«˜äº®ï¼Œæ‰€ä»¥å¼€å§‹äº†è€æœ¬è¡Œå·¥ä½œã€‚</p><ol><li>æ‰“å¼€é…ç½®æ–‡ä»¶ <code>/themes/next/source/js</code> æ›¿æ¢ä»¥ä¸‹å†…å®¹</li></ol><pre><code class="javaScript">instantsearch.widgets.hits({      container  : &#39;#algolia-hits&#39;,      hitsPerPage: algoliaSettings.hits.per_page || 10,      templates  : {        item: function(data) {          var link = data.permalink ? data.permalink : CONFIG.root + data.path;          return (            `              &lt;ul&gt;                &lt;li&gt;                  &lt;a href=${link} class=&quot;algolia-hit-item-link&quot;&gt;${data._highlightResult.title.value}&lt;/a&gt;                  &lt;a href=${link} class=&quot;algolia-hit-item-match&quot;&gt;                    &lt;p&gt;${data._highlightResult.contentStripTruncate.value}&lt;/p&gt;                  &lt;/a&gt;                &lt;/li&gt;              &lt;/ul&gt;            `          );        },        empty: function(data) {          return (            &#39;&lt;div id=&quot;algolia-hits-empty&quot;&gt;&#39;          + algoliaSettings.labels.hits_empty.replace(/\$\{query}/, data.query)          + &#39;&lt;/div&gt;&#39;          );        }      },      cssClasses: {        item: &#39;algolia-hit-item&#39;      }    })</code></pre><ol start="2"><li>ä¿®æ”¹ css <code>/themes/next/source/css/main.styl</code></li></ol><pre><code class="styl">.algolia-hit-item-match  text-decoration none  border none  color rgba(31, 31, 31, 0.37)  &amp;:hover    color rgba(34, 34, 34, 0.53)  em    padding 3px    border-bottom: 1px dashed #f00;    font-weight: bold;    color: #f00;</code></pre>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾ç‰‡æ‡’åŠ è½½çš„ä¸¤ç§æ–¹æ³•-èŠ‚æµ IntersectionObserver</title>
    <link href="/2019/03/17/e5-9b-be-e7-89-87-e6-87-92-e5-8a-a0-e8-bd-bd-e7-9a-84-e4-b8-a4-e7-a7-8d-e6-96-b9-e6-b3-95-e8-8a-82-e6-b5-81-intersectionobserver/"/>
    <url>/2019/03/17/e5-9b-be-e7-89-87-e6-87-92-e5-8a-a0-e8-bd-bd-e7-9a-84-e4-b8-a4-e7-a7-8d-e6-96-b9-e6-b3-95-e8-8a-82-e6-b5-81-intersectionobserver/</url>
    
    <content type="html"><![CDATA[<p><strong>ç¬¬ä¸€ç§ï¼š</strong></p><blockquote><p>ä»¥ä¸‹ä»£ç çš†åœ¨ React ä¸­æµ‹è¯•ä½¿ç”¨</p></blockquote><p>ä½¿ç”¨ <strong><em>window</em></strong> ä¸Šçš„ <strong><em>onscroll</em></strong> äº‹ä»¶ï¼Œé…åˆå°è£…å¥½çš„ throttle èŠ‚æµå‡½æ•°å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½ã€‚</p><p>render å‡½æ•°å†…ï¼š</p><pre><code>render() {    const data = [      {        url: &#39;https://dwz.cn/Jwg1UQEj&#39;,        text: &#39;å›¾ç‰‡1-1&#39;,      },      {        url: &#39;https://dwz.cn/w8t4A0WD&#39;,        text: &#39;å›¾ç‰‡1-2&#39;,      },      {        url: &#39;https://dwz.cn/l1nYpL4U&#39;,        text: &#39;å›¾ç‰‡1-3&#39;,      },      {        url: &#39;https://dwz.cn/2XrYhRBX&#39;,        text: &#39;å›¾ç‰‡1-4&#39;,      },      {        url: &#39;https://dwz.cn/00pSTOtm&#39;,        text: &#39;å›¾ç‰‡1-5&#39;,      },      {        url: &#39;https://dwz.cn/Hg1aIh3e&#39;,        text: &#39;å›¾ç‰‡1-6&#39;,      },    ];    return(      &lt;ul className={styles.list}&gt;        {Object.keys(data).length ? data.map(item =&gt; {          return (            &lt;li key={item.url} &gt;              &lt;h2&gt;{item.text}&lt;/h2&gt;              &lt;img className={styles.lazyImg} src=&#39;https://dwz.cn/qLQmSywT&#39; _src={item.url} alt={item.text}/&gt;            &lt;/li&gt;          )        }) : &#39;loading&#39;}      &lt;/ul&gt;    )  }</code></pre><p>componentDidmount å‡½æ•°å†…</p><pre><code>// è·å–æ‰€æœ‰çš„éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡å…ƒç´ const imgs = document.querySelectorAll(&#39;.&#39;+styles.lazyImg);// é¦–æ¬¡æ‰§è¡Œ æ‰‹åŠ¨è§¦å‘æ»šåŠ¨äº‹ä»¶this.lazyLoad(imgs);// èŠ‚æµå‡½æ•°const lazyLoad = this.throttle(e =&gt; this.lazyLoad(imgs), 400, true);window.onscroll - lazyLoad</code></pre><p>lazyLoad æ–¹æ³•</p><pre><code>lazyLoad = (imgs) =&gt; {    imgs.forEach(item =&gt; {      console.log(&#39;lazyLoad&#39;);      const top = item.getBoundingClientRect().top;      if (top &lt; window.innerHeight &amp;&amp; item.src !== item.getAttribute(&#39;_src&#39;)) {        item.src = item.getAttribute(&#39;_src&#39;);      }    })  };</code></pre><p>// èŠ‚æµå‡½æ•°çš„å°è£…<br>throttle = (fn, wait, immediate) =&gt; {<br>  let timer = null;<br>  let callNow = immediate;<br>  return function() {<br>    const args = arguments,<br>          that = this;<br>    if (callNow) {<br>      fn.apply(that, args);<br>      callNow = false<br>  }<br>    if (!timer) {<br>      setTimeout(() =&gt; {<br>        fn.apply(that, args);<br>        timer = null;<br>      }, wait)<br>    }<br>  }<br>};</p><p><strong>ç¬¬äºŒç§</strong></p><p>ä½¿ç”¨ IntersectionObserver æ¥å£ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å» MDN æŸ¥çœ‹</p><pre><code>const io = new IntersectionObserver(callback); // è·å–æ‰€æœ‰çš„éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡å…ƒç´ const imgs = document.querySelectorAll(&#39;.&#39;+styles.lazyImg);function callback(entries) {      entries.forEach((item) =&gt; {        if(item.isIntersecting){          item.target.src = item.target.getAttribute(&#39;_src&#39;);          io.unobserve(item.target)        }      })}imgs.forEach((item)=&gt;{   io.observe(item)})</code></pre><p>componentDidmount å‡½æ•°å†…</p><blockquote><p>æœ¬æ–‡å¼•è <a href="https://www.jianshu.com/p/84a86e41eb2b" target="_blank" rel="noopener">https://www.jianshu.com/p/84a86e41eb2b</a></p><p>IntersectionObserver äº¦å¯ä»¥å®ç° å¯¼èˆªæ å¸é¡¶æ•ˆæœ</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•é¢è¯•é¢˜-æŸ¥æ‰¾æŒ‡å®šçš„å­—ç¬¦ä¸²</title>
    <link href="/2019/03/09/e7-ae-97-e6-b3-95-e9-9d-a2-e8-af-95-e9-a2-98-e6-9f-a5-e6-89-be-e6-8c-87-e5-ae-9a-e7-9a-84-e5-ad-97-e7-ac-a6-e4-b8-b2/"/>
    <url>/2019/03/09/e7-ae-97-e6-b3-95-e9-9d-a2-e8-af-95-e9-a2-98-e6-9f-a5-e6-89-be-e6-8c-87-e5-ae-9a-e7-9a-84-e5-ad-97-e7-ac-a6-e4-b8-b2/</url>
    
    <content type="html"><![CDATA[<p>å®ç°ä¸€ä¸ªç®—æ³•ï¼Œå¯»æ‰¾å­—ç¬¦ä¸²ä¸­å‡ºç°æ¬¡æ•°æœ€å°‘çš„ã€å¹¶ä¸”é¦–æ¬¡å‡ºç°ä½ç½®æœ€å‰çš„å­—ç¬¦å¦‚<br>â€œ<em>cbaacfdeaebb</em>â€œï¼Œç¬¦åˆè¦æ±‚çš„æ˜¯â€fâ€ï¼Œå› ä¸ºä»–åªå‡ºç°äº†ä¸€æ¬¡ï¼ˆæ¬¡æ•°æœ€å°‘ï¼‰ã€‚<br>å¹¶ä¸”æ¯”å…¶ä»–åªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ï¼ˆå¦‚â€dâ€ï¼‰é¦–æ¬¡å‡ºç°çš„ä½ç½®æœ€é å‰ã€‚</p><pre><code>const findMinStr = (str) =&gt; {    const hash = {};    for (let i = 0; i &lt; str.length; i += 1) {      hash[str[i]] = hash[str[i]] || { index: i, count: 0 };      hash[str[i]].count += 1;    }    return Object.keys(hash).map(item =&gt; {      return Object.assign({ char: item }, hash[item]);    })      .sort((a, b) =&gt; a.count - b.count)      .filter((item, index, arr) =&gt; item.count === arr[0].count)      .sort((a, b) =&gt; a.index - b.index)[0].char};const str = &#39;cbaacfdeaebb&#39;;findMinStr (str)  // &#39;f&#39;</code></pre>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨reactä¸­ä½¿ç”¨antd+less+css modules</title>
    <link href="/2019/03/09/e5-9c-a8react-e4-b8-ad-e4-bd-bf-e7-94-a8antdlesscss-modules/"/>
    <url>/2019/03/09/e5-9c-a8react-e4-b8-ad-e4-bd-bf-e7-94-a8antdlesscss-modules/</url>
    
    <content type="html"><![CDATA[<h4 id="é…ç½®less"><a href="#é…ç½®less" class="headerlink" title="é…ç½®less"></a>é…ç½®less</h4><p>é¦–å…ˆå®‰è£…lesså’Œless-loader</p><pre><code>cnpm i --save-dev less less-loader</code></pre><p>ç„¶ååœ¨webpack.configä¸­é…ç½®</p><pre><code>{  test: /\.less$/,  use: [      require.resolve(&#39;style-loader&#39;),      {          loader: require.resolve(&#39;css-loader&#39;)      },      {          loader: require.resolve(&#39;less-loader&#39;), // compiles Less to CSS      },  ],},</code></pre><h4 id="å¼€å¯css-modulesåŠŸèƒ½"><a href="#å¼€å¯css-modulesåŠŸèƒ½" class="headerlink" title="å¼€å¯css modulesåŠŸèƒ½"></a>å¼€å¯css modulesåŠŸèƒ½</h4><p>ä½†æ˜¯å¦‚æœæˆ‘æƒ³å¼€å¯css modulesåŠŸèƒ½ï¼Œä½¿lesså’Œcsså¯ä»¥æ¨¡å—åŒ–ï¼Œå°±éœ€è¦å†é…ç½®ï¼Œä½†æ˜¯ä¸èƒ½å…¨å±€é…ç½®ï¼Œè¿™æ ·çš„è¯ä¼šå¯¼è‡´antdæ²¡æœ‰ä½¿ç”¨css modulesæ¨¡å—çš„æ¡†æ¶çš„æ ·å¼æ— æ³•ä½œç”¨ã€‚</p><h6 id="å¼€å¯lessçš„css-modulesåŠŸèƒ½"><a href="#å¼€å¯lessçš„css-modulesåŠŸèƒ½" class="headerlink" title="å¼€å¯lessçš„css modulesåŠŸèƒ½"></a>å¼€å¯lessçš„css modulesåŠŸèƒ½</h6><pre><code> è¿™é‡Œæˆ‘å¼€å¯è‡ªå·±ç¼–å†™çš„lessæ–‡ä»¶çš„css modulesåŠŸèƒ½ é™¤äº†node_modulesåº“ä¸­çš„lessï¼Œ//ä¹Ÿå°±æ˜¯å¯ä»¥è¿‡æ»¤æ‰antdåº“ä¸­çš„æ ·å¼{  test: /\.less$/,  exclude: [/node_modules/],  use: [      require.resolve(&#39;style-loader&#39;),      {          loader: require.resolve(&#39;css-loader&#39;),          options: {              modules: true,              localIdentName:&quot;[name]__[local]___[hash:base64:5]&quot;          },      },      {          loader: require.resolve(&#39;less-loader&#39;), // compiles Less to CSS      },  ],},</code></pre><h6 id="å¼€å¯cssçš„css-modulesåŠŸèƒ½"><a href="#å¼€å¯cssçš„css-modulesåŠŸèƒ½" class="headerlink" title="å¼€å¯cssçš„css modulesåŠŸèƒ½"></a>å¼€å¯cssçš„css modulesåŠŸèƒ½</h6><p>å¦‚æœæƒ³å¼€å¯cssçš„css modulesåŠŸèƒ½ï¼Œå°±æ¯”è¾ƒéº»çƒ¦ç‚¹ï¼Œé™¤äº†é’ˆå¯¹csså¼€å¯css modulesï¼Œè¿˜éœ€è¦éœ€è¦é’ˆå¯¹antdçš„css å•ç‹¬å†™ä¸€æ¡loaderçš„è§„åˆ™,ä¸å¼€å¯ css modulesã€‚</p><pre><code> è¿™é‡Œè®¾ç½®csså¼€å¯modulesæ”¯æŒ,node_moduleså’Œantdé‡Œé¢çš„cssä¸å¼€å¯{  test: /\.css$/,  exclude: /node_modules|antd\.css/,  use: [      require.resolve(&#39;style-loader&#39;),      {          loader: require.resolve(&#39;css-loader&#39;),          options: {              importLoaders: 1,              // æ”¹åŠ¨              modules: true,   // æ–°å¢å¯¹css modulesçš„æ”¯æŒ              localIndetName: &#39;[name]__[local]__[hash:base64:5]&#39;, //          },      },      {          loader: require.resolve(&#39;postcss-loader&#39;),          options: {              ident: &#39;postcss&#39;,              plugins: () =&gt; [                  require(&#39;postcss-flexbugs-fixes&#39;),                  autoprefixer({                      browsers: [                          &#39;&gt;1%&#39;,                          &#39;last 4 versions&#39;,                          &#39;Firefox ESR&#39;,                          &#39;not ie &lt; 9&#39;, // React doesn&#39;t support IE8 anyway                      ],                      flexbox: &#39;no-2009&#39;,                  }),              ],          },      },  ],}ç„¶åé’ˆå¯¹node_moduleså’Œantdé‡Œé¢çš„csså†™ç¼–è¯‘é…ç½®{  test: /\.css$/,  include: /node_modules|antd\.css/,  use: [      require.resolve(&#39;style-loader&#39;),      {          loader: require.resolve(&#39;css-loader&#39;),          options: {              importLoaders: 1,              // æ”¹åŠ¨              // modules: true,   // æ–°å¢å¯¹css modulesçš„æ”¯æŒ              // localIndetName: &#39;[name]__[local]__[hash:base64:5]&#39;, //          },      },      {          loader: require.resolve(&#39;postcss-loader&#39;),          options: {              ident: &#39;postcss&#39;,              plugins: () =&gt; [                  require(&#39;postcss-flexbugs-fixes&#39;),                  autoprefixer({                      browsers: [                          &#39;&gt;1%&#39;,                          &#39;last 4 versions&#39;,                          &#39;Firefox ESR&#39;,                          &#39;not ie &lt; 9&#39;, // React doesn&#39;t support IE8 anyway                      ],                      flexbox: &#39;no-2009&#39;,                  }),              ],          },      },  ],},</code></pre><blockquote><p>è‡³æ­¤å°±é…ç½®å¥½äº†å¼€å‘ç¯å¢ƒä¸‹çš„æ‰€æœ‰ä»£ç <br>åŒæ ·çš„ä»£ç éœ€è¦åœ¨webpack.config.prodï¼Œç”Ÿäº§ç¯å¢ƒçš„webpacké‡Œé¢å†é…ç½®ä¸€æ¬¡ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶å„ç§CSSå’Œlessæ–‡ä»¶æ‰ä¼šç”Ÿæ•ˆã€‚</p></blockquote><p><a href="https://www.jianshu.com/p/51ff1c8be301" target="_blank" rel="noopener">è½¬è‡ª è¿½é£çš„äº‘æœˆ</a></p>]]></content>
    
    
    <categories>
      
      <category>webpack</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–è¯‘ä¿®é¥°ç¬¦ Bableé…ç½®</title>
    <link href="/2019/03/08/e7-bc-96-e8-af-91-e7-ae-ad-e5-a4-b4-e5-87-bd-e6-95-b0-bable-e9-85-8d-e7-bd-ae/"/>
    <url>/2019/03/08/e7-bc-96-e8-af-91-e7-ae-ad-e5-a4-b4-e5-87-bd-e6-95-b0-bable-e9-85-8d-e7-bd-ae/</url>
    
    <content type="html"><![CDATA[<p>xiu npm install â€“save-dev babel-plugin-transform-decorators-legacy</p><pre><code>åœ¨æ ¹ç›®å½•.babelrcæ–‡ä»¶é‡Œ&quot;plugins&quot;: [&quot;transform-decorators-legacy&quot;]å¦‚æœæ²¡æœ‰babel.lrcæ–‡ä»¶è¯·æœç´¢å¯¹åº”æ¡†æ¶çš„æ–‡ä»¶é…ç½®</code></pre>]]></content>
    
    
    <categories>
      
      <category>webpack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>babel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é˜¿é‡Œäº‘ 144 å…ƒ ä¸€å¹´30Mbé¦™æ¸¯æœåŠ¡å™¨ 3.4~3.15</title>
    <link href="/2019/03/08/e9-98-bf-e9-87-8c-e4-ba-91-144-e5-85-83-e4-b8-80-e5-b9-b430mb-e9-a6-99-e6-b8-af-e6-9c-8d-e5-8a-a1-e5-99-a8-3-43-15/"/>
    <url>/2019/03/08/e9-98-bf-e9-87-8c-e4-ba-91-144-e5-85-83-e4-b8-80-e5-b9-b430mb-e9-a6-99-e6-b8-af-e6-9c-8d-e5-8a-a1-e5-99-a8-3-43-15/</url>
    
    <content type="html"><![CDATA[<p>æ‰“å¼€ï¼š<a href="http://t.cn/EIJKfAY" target="_blank" rel="noopener">http://t.cn/EIJKfAY</a> ç‚¹å‡»ç«‹å³æŠ¥å</p><p>æ‰“å¼€ï¼š<a href="http://t.cn/EIJ9KUH" target="_blank" rel="noopener">http://t.cn/EIJ9KUH</a> æŒ‰ä¸Šå›¾é€‰æ‹©é¦™æ¸¯CentOsç³»ç»Ÿ1å¹´30MbæœåŠ¡å™¨åªéœ€144å…ƒ</p><p>æ´»åŠ¨æ—¶é—´ï¼š2019.3.4~3.15</p><p><img src="http://blog.ksh7.com/wp-content/uploads/2019/03/rjIMsVh_jpg-1-1024x387.jpg" alt=""></p><p><img src="http://blog.ksh7.com/wp-content/uploads/2019/03/rjIMvXu_jpg-1-1024x680.jpg" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>ç¦åˆ©æ´»åŠ¨</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>courseTable -- å¯ç§»åŠ¨çš„Reactè¯¾ç¨‹è¡¨ç»„ä»¶</title>
    <link href="/2019/03/08/coursetable-e5-8f-af-e7-a7-bb-e5-8a-a8-e7-9a-84react-e8-af-be-e7-a8-8b-e8-a1-a8-e7-bb-84-e4-bb-b6/"/>
    <url>/2019/03/08/coursetable-e5-8f-af-e7-a7-bb-e5-8a-a8-e7-9a-84react-e8-af-be-e7-a8-8b-e8-a1-a8-e7-bb-84-e4-bb-b6/</url>
    
    <content type="html"><![CDATA[<h1 id="Course-Table"><a href="#Course-Table" class="headerlink" title="Course Table"></a>Course Table</h1><h2 id="âœ¨-Features"><a href="#âœ¨-Features" class="headerlink" title="âœ¨ Features"></a>âœ¨ Features</h2><ul><li>å¯ç§»åŠ¨çš„ è¯¾ç¨‹è¡¨</li><li>ä»£ç ç®€å•ï¼Œæ¬¢è¿ä¼˜åŒ–</li><li>é¢„è§ˆé“¾æ¥ <a href="https://Kshao123.github.io" target="_blank" rel="noopener">https://Kshao123.github.io</a></li></ul><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="IE / Edge"></a><br>IE / Edge</p><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox"></a><br>Firefox</p><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome"></a><br>Chrome</p><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari"></a><br>Safari</p><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera"></a><br>Opera</p><p><a href="http://godban.github.io/browsers-support-badges/" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/electron/electron_48x48.png" alt="Electron"></a><br>Electron</p><p>IE9, IE10, IE11, Edge</p><p>last 2 versions</p><p>last 2 versions</p><p>last 2 versions</p><p>last 2 versions</p><p>last 2 versions</p><h2 id="ğŸ“¦-Install"><a href="#ğŸ“¦-Install" class="headerlink" title="ğŸ“¦ Install"></a>ğŸ“¦ Install</h2><pre><code>npm i course-tablenpm i course-table -S</code></pre><h2 id="ğŸ”¨-Usage"><a href="#ğŸ”¨-Usage" class="headerlink" title="ğŸ”¨ Usage"></a>ğŸ”¨ Usage</h2><pre><code>import CourseTable from &#39;course-table&#39;;const courseTables = {      1: [        {          startTime:1551920827000,          endTime:1551924427000,          stuNameList: [&#39;123&#39;],          teaName: &#39;312&#39;        }      ]    };const handleConfirm = (data,handleOK) =&gt; {    handleOK()};ReactDOM.render(    &lt;CourseTable         courseTables={courseTables}        handleConfirm={handleConfirm}    /&gt;,     mountNode);</code></pre>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ReactComponent</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
